<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WAN 2.2 Video Animator - Batch Processor</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸŽ¬ WAN 2.2 Video Animator</h1>
      <p>Batch process videos with character replacement â€¢ Powered by Alibaba Cloud DashScope</p>
      <small style="display: block; margin-top: 0.5rem; opacity: 0.7;">
        âš¡ 1-minute chunks â€¢ 5 parallel processes â€¢ Firebase ready
      </small>
    </header>

    <main>
      <!-- Configuration Section -->
      <section class="config-section card">
        <h2>Configuration</h2>
        
        <div class="form-group">
          <label for="apiKey">DashScope API Key *</label>
          <input type="password" id="apiKey" placeholder="sk-b027cd54457b40888adde4cef33a4082" required>
          <small>Your Alibaba Cloud DashScope API key (required)</small>
        </div>

        <div class="form-group">
          <label for="characterImage">Character Image *</label>
          <div class="image-upload-area" id="imageUploadArea">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <p>Click to upload character image</p>
            <small>PNG, JPG, or WebP (max 10MB)</small>
            <input type="file" id="characterImage" accept="image/*" hidden>
          </div>
          <div id="imagePreview" class="image-preview" style="display: none;">
            <img id="previewImg" src="" alt="Character preview">
            <button type="button" class="remove-image" onclick="removeCharacterImage()">Ã—</button>
          </div>
        </div>

        <div class="form-group">
          <label for="mode">Processing Mode</label>
          <select id="mode">
            <option value="wan-std">Standard Mode (Fast & Cost-effective - ~9s per second of video)</option>
            <option value="wan-pro">Professional Mode (Higher Quality - ~16s per second of video)</option>
          </select>
          <small>Choose between speed and quality</small>
        </div>
      </section>

      <!-- Upload Section -->
      <section class="upload-section card">
        <h2>Upload Videos</h2>
        
        <div class="upload-area" id="uploadArea">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <p>Drag & drop videos here or click to browse</p>
          <small>Support for multiple videos (MP4, MOV, AVI)</small>
          <input type="file" id="fileInput" multiple accept="video/*" hidden>
        </div>

        <div id="uploadProgress" class="upload-progress" style="display: none;">
          <div class="progress-info">
            <span id="uploadStatus">Uploading...</span>
            <span id="uploadPercent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="uploadProgressFill"></div>
          </div>
          <small id="uploadDetails"></small>
        </div>

        <div id="fileList" class="file-list"></div>

        <button id="processBtn" class="btn btn-primary" disabled>
          Start Processing
        </button>
      </section>

      <!-- Progress Section -->
      <section class="progress-section card" id="progressSection" style="display: none;">
        <h2>Processing Status</h2>
        
        <div class="progress-info">
          <div class="progress-text">
            <span id="statusText">Initializing...</span>
            <span id="progressPercent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <div class="chunk-info">
          <p>Processed Chunks: <strong id="chunkProgress">0/0</strong></p>
          <p>Current File: <strong id="currentFile">-</strong></p>
        </div>
      </section>

      <!-- Results Section -->
      <section class="results-section card" id="resultsSection" style="display: none;">
        <h2>Processed Videos</h2>
        <div id="resultsList" class="results-list"></div>
      </section>
    </main>

    <footer>
      <p>Powered by Replicate API â€¢ WAN 2.2 Model</p>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>

